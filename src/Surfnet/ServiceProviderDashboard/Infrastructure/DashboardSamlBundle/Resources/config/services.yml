services:

    Surfnet\ServiceProviderDashboard\Infrastructure\DashboardSamlBundle\Controller\:
        resource: '../../Controller'
        tags: ['controller.service_arguments']

    Surfnet\ServiceProviderDashboard\Infrastructure\DashboardSamlBundle\Controller\SamlController:
        arguments:
            - '@logger'
            - '@surfnet_saml.metadata_factory'
            - '@surfnet_saml.http.post_binding'
            - '@surfnet_saml.remote.idp'
            - '@surfnet_saml.hosted.service_provider'
        tags:
            - controller.service_arguments
        calls:
            - method: setContainer
              arguments: [ '@service_container' ]

    # Firewall

    surfnet_saml.saml_provider:
        class: Surfnet\ServiceProviderDashboard\Infrastructure\DashboardSamlBundle\Security\Authentication\Provider\SamlProvider
        arguments:
            - '@Surfnet\ServiceProviderDashboard\Infrastructure\DashboardBundle\Repository\ContactRepository'
            - '@Surfnet\ServiceProviderDashboard\Infrastructure\DashboardBundle\Repository\ServiceRepository'
            - '@surfnet_saml.saml.attribute_dictionary'
            - '@logger'
            - '%surfnet.dashboard.security.authentication.administrator_teams%'

    Surfnet\ServiceProviderDashboard\Infrastructure\DashboardSamlBundle\Security\Authentication\Provider\SamlProvider:
        alias: surfnet_saml.saml_provider

    # Session
    Surfnet\ServiceProviderDashboard\Infrastructure\DashboardSamlBundle\Security\Authentication\Session\SessionLifetimeGuard:
        arguments:
            - '@surfnet.dashboard.security.authentication.session.absolute_maximum_lifetime'
            - '@surfnet.dashboard.security.authentication.session.relative_maximum_lifetime'

    surfnet.dashboard.security.authentication.session.absolute_maximum_lifetime:
        class: Surfnet\ServiceProviderDashboard\Infrastructure\DashboardSamlBundle\Value\TimeFrame
        factory: [Surfnet\ServiceProviderDashboard\Infrastructure\DashboardSamlBundle\Value\TimeFrame, ofSeconds]
        arguments:
            - '%surfnet.dashboard.security.authentication.session.maximum_absolute_lifetime_in_seconds%'

    surfnet.dashboard.security.authentication.session.relative_maximum_lifetime:
        class: Surfnet\ServiceProviderDashboard\Infrastructure\DashboardSamlBundle\Value\TimeFrame
        factory: [Surfnet\ServiceProviderDashboard\Infrastructure\DashboardSamlBundle\Value\TimeFrame, ofSeconds]
        arguments:
            - '%surfnet.dashboard.security.authentication.session.maximum_relative_lifetime_in_seconds%'
